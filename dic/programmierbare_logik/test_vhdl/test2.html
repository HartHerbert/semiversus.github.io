<!DOCTYPE html>
<html lang="de">
<head>
  <meta name="description" content="Blog und Unterrichtsmaterial zu Digitale Systeme und Computersysteme">
  <meta name="author" content="Günther Jena">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Semiversus</title> 
  <link href="../../../theme/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../../theme/css/semiversus.css" rel="stylesheet">
  <link href="../../../theme/css/pygments.css" rel="stylesheet">
  <script src="../../../theme/js/jquery.min.js"></script>
  <script src="../../../theme/js/bootstrap.min.js"></script>
  <!--[if lt IE 9]>
    <script src="../../../theme/js/html5shiv.js"></script>
    <script src="../../../theme/js/respond.min.js"></script>
  <![endif]-->
</head>
<body data-spy="scroll" data-target="#sidebar" data-offset=30>
  <div id="wrap">
  <nav class="navbar navbar-inverse">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
        </button>
        <a href="../../../dic/uebersicht.html" class="navbar-brand">SEMIVERSUS</a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="../../../archives.html">Blog</a></li>
          <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Unterricht<b class="carret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="../../../dic/uebersicht.html"><em>Übersicht</em></a></li>
              <li><a href="../../../dic/grundlagen_der_digitaltechnik/uebersicht.html">Grundlagen der Digitaltechnik</a></li>
              <li><a href="../../../dic/programmierbare_logik/uebersicht.html">Programmierbare Logik</a></li>
              <li><a href="../../../dic/mikrocontroller/uebersicht.html">Mikrocontroller</a></li>
              <li><a href="../../../dic/hardwarenahe_programmierung/uebersicht.html">Hardwarenahe Programmierung</a></li>
              <li><a href="../../../dic/halbleiterelemente/uebersicht.html">Halbleiterelemente</a></li>
              <li><a href="../../../dic/bussysteme/uebersicht.html">Bussysteme</a></li>
              <li><a href="../../../dic/rechnerarchitektur/uebersicht.html">Rechnerarchitektur</a></li>
              <li><a href="../../../dic/digitale_signalverarbeitung/uebersicht.html">Digitale Signalverarbeitung</a></li>
              <li><a href="../../../dic/komplexe_digitale_systeme/uebersicht.html">Komplexe digitale Systeme</a></li>
            </ul>
          <li><a href="../../../projekte/projekte.html">Projekte</a></li>
          <li><a href="../../../pages/about.html">Über mich</a></li>
        </ul>
    </div>
  </nav>
  <div class="container">
  <div class="row">
    <div class="col-md-9" role="main">
    <div class="visible-print-block">Semiversus | VHDL Test (2) | URL: ../../../dic/programmierbare_logik/test_vhdl/test2.html</div>
<ol class="breadcrumb hidden-print"><li><a href="../../../dic/uebersicht.html">Digitale Systeme und Computersysteme</a></li><li><a href="../../../dic/programmierbare_logik/uebersicht.html">Programmierbare Logik</a></li><li><a href="../../../dic/programmierbare_logik/test_vhdl/uebersicht.html">Test - VHDL</a></li><li><strong>VHDL Test (2)</strong></li></ol>    <header><h1>VHDL Test (2)</h1></header>
    <h1 id="allgemeines">Allgemeines</h1>
<ul>
<li><a href="../../../dic/programmierbare_logik/test_vhdl/vhdl_test_2.zip">Projektordner</a> herunterladen und entpacken</li>
<li>Insgesamt gibt es <span class="badge">29 Punkte</span></li>
<li>Die einzelnen Punkte bauen meist nicht aufeinander auf. Statt langer Fehlersuche lieber auf das n&auml;chste Beispiel wechseln.</li>
</ul>
<h1 id="einschaltverzogerung">Einschaltverz&ouml;gerung</h1>
<h2 id="vorbereitung">Vorbereitung</h2>
<ul>
<li>Projekt <tt>led_delay/led_delay.xise</tt> &ouml;ffnen</li>
</ul>
<h2 id="aufgabenstellung">Aufgabenstellung</h2>
<p>Es ist eine einfache Einschaltverz&ouml;gerung zu entwerfen. Diese Einschaltverz&ouml;gerung steuert eine LED an und wird mittels zwei Tasten
bedient:</p>
<ul>
<li><code>button_toggle</code> - Schaltet das Licht ein bzw. aus</li>
<li><code>button_on</code> - Schaltet das Licht in 3 Sekunden ein</li>
</ul>
<h2 id="entwurf-der-zustandsmaschine">Entwurf der Zustandsmaschine</h2>
<p><span class="badge">5 Punkte</span></p>
<p>Zur Realisierung wird eine Zustandsmaschine genutzt.</p>
<ul>
<li>Bearbeite die Datei <tt>led_delay_fsm.vhd</tt></li>
<li>Definiere die drei Zust&auml;nden <code>OFF</code>, <code>LIGHT</code> und <code>DELAY</code></li>
<li>Der Startzustand ist <code>OFF</code></li>
<li>Der Eingang <code>toggle_i</code> wechselt von <code>LIGHT</code> nach <code>OFF</code> bzw. von <code>OFF</code> oder <code>DELAY</code> nach <code>LIGHT</code></li>
<li>Der Eingang <code>on_i</code> wechselt von <code>OFF</code> nach <code>DELAY</code>, bei den anderen Zust&auml;nden hat er keine Auswirkung</li>
<li>Der Eingang <code>timeout_i</code> bewirkt ein Wechsel von <code>DELAY</code> nach <code>LIGHT</code>, bei den anderen Zust&auml;nden hat er keine Auswirkung</li>
<li>Der Ausgang <code>led_o</code> ist auf <code>'1'</code>, wenn die Zustandmaschine im Zustand <code>LIGHT</code> ist</li>
<li>Der Ausgang <code>timer_enable_o</code> ist im Zustand <code>DELAY</code> auf <code>'1'</code>, ansonsten <code>'0'</code></li>
<li>Der Ausgang <code>timer_clear_o</code> ist im Zustand <code>OFF</code> auf <code>'1'</code>, ansonsten <code>'0'</code></li>
</ul>
<p><img alt="FSM f&uuml;r Lichtsteuerung" src="../../../dic/programmierbare_logik/test_vhdl/test2_led_delay_fsm.png"/></p>
<div class="panel panel-info">
<div class="panel-heading">Testbench</div>
<div class="panel-body">
<p>Teste die Implementierung mittels der Testbench <tt>led_delay_fsm_tb.vhd</tt>. Mittels <kbd>F6</kbd> l&auml;sst sich
der gesamte Bereich zoomen.</p>
</div>
</div>
<h2 id="implementierung-des-top-levels">Implementierung des Top Levels</h2>
<p><span class="badge">5 Punkte</span></p>
<p>Zur Verf&uuml;gung stehen die Komponenten <tt>counter</tt>, <tt>button_dectect</tt> und <tt>led_delay_fsm</tt>. Diese
Komponenten werden genutzt, um im Top Level <tt>led_delay.vhd</tt> die gew&uuml;nschte Funktionalit&auml;t zu realisieren.</p>
<ul>
<li>Die Instanz der Komponente <tt>button_detect</tt> mit dem Namen <code>toggle_detect_component</code> ist bereits erstellt<ul>
<li><code>button_i</code> ist mit dem Eingang <code>button_toggle_i</code> verbunden</li>
<li><code>detect_o</code> ist mit dem (bereits definiertem) Signal <code>toggle_detect</code> verbunden</li>
</ul>
</li>
<li>Erstelle eine Instanz der Komponente <tt>button_detect</tt> mit dem Namen <code>on_detect_component</code> analog zu <code>toggle_detect_component</code><ul>
<li><code>button_i</code> ist mit dem Eingang <code>button_on_i</code> verbunden</li>
<li><code>detect_o</code> ist mit dem (bereits definiertem) Signal <code>on_detect</code> verbunden</li>
</ul>
</li>
<li>Erstelle eine Instanz der Komponente <tt>led_delay_fsm</tt> mit dem Namen <code>led_delay_fsm_component</code><ul>
<li><code>toggle_i</code> ist mit dem Signal <code>toggle_detect</code> verbunden</li>
<li><code>on_i</code> ist mit dem Signal <code>on_detect</code> verbunden</li>
<li><code>timeout_i</code> ist mit dem (bereits definiertem) Signal <code>timeout</code> verbunden</li>
<li><code>led_o</code> ist mit dem Ausgang <code>led_o</code> verbunden</li>
<li><code>timer_enable_o</code> ist mit dem (bereits definiertem) Signal <code>timer_enable</code> verbunden</li>
<li><code>timer_clear_o</code> ist mit dem (bereits definiertem) Signal <code>timer_clear</code> verbunden</li>
</ul>
</li>
<li>Erstelle eine Instanz der Komponente <tt>counter</tt> mit dem Namen <code>timeout_component</code><ul>
<li><code>WIDTH</code> in der <em>generic map</em> wird auf 28 gestellt (28 Bit)</li>
<li><code>MAXIMUM</code> wird auf <code>CLK_TIMEOUT_DIVIDER</code> gestellt (ist im <em>generic</em> Teil des Top Levels bereits definiert)</li>
<li><code>enable_i</code> ist mit dem Signal <code>timer_enable</code> verbunden</li>
<li><code>reset_i</code> ist mit dem Signal <code>timer_clear</code> verbunden</li>
<li><code>value_o</code> ist nicht verbunden (<code>open</code>)</li>
<li><code>overflow_o</code> ist mit dem Signal <code>timeout</code> verbunden</li>
</ul>
</li>
<li>Jede Komponente hat einen Takteingang <code>clk</code>, welcher mit dem globalen <code>clk</code> verbunden wird</li>
</ul>
<div class="panel panel-info">
<div class="panel-heading">Testbench</div>
<div class="panel-body">
<p>Teste die Implementierung mittels der Testbench <tt>led_delay_tb.vhd</tt>.</p>
</div>
</div>
<h2 id="erweiterung-der-constraints-datei">Erweiterung der <em>Constraints</em> Datei</h2>
<p><span class="badge">2 Punkte</span></p>
<p>In der Datei <tt>led_delay.ucf</tt> ist nur das Signal <code>clk</code> definiert. Erweitere die Datei um folgende Zuordnungen</p>
<ul>
<li><code>button_toggle_i</code> wird durch den Taster <tt>BTN0</tt> angesteuert</li>
<li><code>button_on_i</code> wird durch den Taster <tt>BTN1</tt> angesteuert</li>
<li><code>led_o</code> ist die LED <tt>LD0</tt></li>
</ul>
<figure><img src="../../../dic/programmierbare_logik/basys2_pinout.png"><figcaption>Pinout des BASYS2 Boards(Bild: <a href="http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,400,790&amp;Prod=BASYS2">Digilent Inc. BASYS2 Manual</a>)</figcaption></img></figure>
<h2 id="test-am-board">Test am Board</h2>
<p><span class="badge">1 Punkt</span></p>
<p>Synthetisiere das Projekt und teste das Ergebnis am Board</p>
<h1 id="wurfel_1">W&uuml;rfel</h1>
<h2 id="vorbereitung_1">Vorbereitung</h2>
<ul>
<li>Projekt <tt>dice/dice.xise</tt> &ouml;ffnen</li>
</ul>
<h2 id="aufgabenstellung_1">Aufgabenstellung</h2>
<p>Mittels sieben LEDs wird ein W&uuml;rfel dargestellt. Eine Taste startet durch das Dr&uuml;cken einen <em>Zufallsgenerator</em> und beim
Loslassen wird das Ergebnis angezeigt. Dieser <em>Zufallsgenerator</em> ist ein Z&auml;hler, der mit 50Mhz die 6 m&ouml;glichen Zust&auml;nde
durchwechselt.</p>
<h2 id="decoder-testen">Decoder testen</h2>
<p><span class="badge">5 Punkte</span></p>
<p>Der Decoder wandelt den Eingang <code>value_i</code> (3 Bit) in die entsprechende 7 LEDs Darstellung <code>leds_o</code> (7 Bit) um. Dabei
wird folgende kodierung verwendet:</p>
<table>
<thead>
<tr>
<th align="center">LED6</th>
<th align="center">LED5</th>
<th align="center">LED4</th>
<th align="center">LED3</th>
<th align="center">LED2</th>
<th align="center">LED1</th>
<th align="center">LED0</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Aus</td>
<td align="center">Aus</td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center">Aus</td>
<td align="center">Aus</td>
</tr>
<tr>
<td align="center">Aus</td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center">Aus</td>
</tr>
<tr>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
</tr>
<tr>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
</tr>
<tr>
<td align="center"><strong>Ein</strong></td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center"><strong>Ein</strong></td>
</tr>
<tr>
<td align="center"><strong>Ein</strong></td>
<td align="center"><strong>Ein</strong></td>
<td align="center"><strong>Ein</strong></td>
<td align="center">Aus</td>
<td align="center"><strong>Ein</strong></td>
<td align="center"><strong>Ein</strong></td>
<td align="center"><strong>Ein</strong></td>
</tr>
</tbody>
</table>
<ul>
<li>Die erste Zeile entspricht der Darstellung bei <code>value_i</code> gleich <code>"000"</code></li>
<li><em>Ein</em> wird mittels <code>'1'</code> kodiert, <em>Aus</em> mittels <code>'0'</code></li>
<li>Bei nicht definierten Zust&auml;nde sollen alle LEDs aus sein</li>
</ul>
<p>Die Komponente ist in vier Ausf&uuml;hrungen (<em>Architectures</em>) bereits in der Datei <tt>decoder.vhd</tt> beschrieben. Die
<em>Architectures</em> lauten <code>behave1</code>, <code>behave2</code>, <code>behave3</code> und <code>behave4</code>.</p>
<p>Erstelle in der Datei <tt>decoder_tb.vhd</tt> eine Testbench, die herausfindet, welche der vier Ausf&uuml;hrungen
funktioniert (es ist genau eine).</p>
<h2 id="komponente-shuffle">Komponente <code>shuffle</code></h2>
<p><span class="badge">5 Punkte</span></p>
<p>Erstelle die Komponente <code>shuffle</code> durch Bearbeitung der Datei <tt>shuffle.vhd</tt> nach folgender Skizze:</p>
<p><img alt="Shuffle Komponente" src="../../../dic/programmierbare_logik/test_vhdl/test2_shuffle.jpg"/></p>
<ul>
<li>Wenn <code>enable_i</code> auf <code>'1'</code> ist, soll der interne Z&auml;hler <code>counter_reg</code> bei einer steigenden Taktflanke hinaufz&auml;hlen</li>
<li>Der interne Z&auml;hler soll von 0 bis 5 z&auml;hlen</li>
<li>Das Register <code>result_reg</code> &uuml;bernimmt bei einer steigenden Taktflanke den Wert von <code>counter_reg</code>, wenn <code>enable_i</code> gleich <code>'0'</code> ist</li>
</ul>
<div class="panel panel-info">
<div class="panel-heading">Testbench</div>
<div class="panel-body">
<p>Teste die Implementierung mittels der Testbench <tt>shuffle_tb.vhd</tt>.</p>
</div>
</div>
<h2 id="implementierung-des-top-levels_1">Implementierung des Top Levels</h2>
<p><span class="badge">5 Punkte</span></p>
<p>Zur Verf&uuml;gung stehen die Komponenten <tt>shuffle</tt>, <tt>decoder</tt>. Diese
Komponenten werden genutzt, um im Top Level <tt>dice.vhd</tt> die gew&uuml;nschte Funktionalit&auml;t zu realisieren.</p>
<div class="panel panel-info">
<div class="panel-heading">Testbench</div>
<div class="panel-body">
<p>Teste die Implementierung mittels der Testbench <tt>dice_tb.vhd</tt>.</p>
</div>
</div>
<h2 id="test-am-board_1">Test am Board</h2>
<p><span class="badge">1 Punkt</span></p>
<p>Synthetisiere das Projekt und teste das Ergebnis am Board</p>
    </div>
    <div class="col-md-3 hidden-print" role="complementary">
      <nav class="well well-sm" data-spy="affix" data-offset-top="0" id="sidebar">
      <ul class="nav"><li><a href="#allgemeines">Allgemeines</a></li><li><a href="#einschaltverzogerung">Einschaltverz&ouml;gerung</a><ul class="nav"><li><a href="#vorbereitung">Vorbereitung</a></li><li><a href="#aufgabenstellung">Aufgabenstellung</a></li><li><a href="#entwurf-der-zustandsmaschine">Entwurf der Zustandsmaschine</a></li><li><a href="#implementierung-des-top-levels">Implementierung des Top Levels</a></li><li><a href="#erweiterung-der-constraints-datei">Erweiterung der Constraints Datei</a></li><li><a href="#test-am-board">Test am Board</a></li></ul></li><li><a href="#wurfel_1">W&uuml;rfel</a><ul class="nav"><li><a href="#vorbereitung_1">Vorbereitung</a></li><li><a href="#aufgabenstellung_1">Aufgabenstellung</a></li><li><a href="#decoder-testen">Decoder testen</a></li><li><a href="#komponente-shuffle">Komponente shuffle</a></li><li><a href="#implementierung-des-top-levels_1">Implementierung des Top Levels</a></li><li><a href="#test-am-board_1">Test am Board</a></li></ul></li></ul>
      </nav>
    </div>
  </div>
  </div>
  </div>
  <footer class="footer hidden-print"><div class="container"><p class="text-muted credit"><a href="http://creativecommons.org/licenses/by-sa/3.0/de/">CC-BY-SA</a> | Günther Jena 2011 - 2016 | Letztes Update am 15.3.2016 (Rev. <a href="https://github.com/semiversus/semiversus.github.io-source/commit/b1feda1">b1feda1</a>)</p></div></footer>
</body>
</html>