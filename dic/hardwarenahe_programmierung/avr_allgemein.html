<!DOCTYPE html>
<html lang="de">
<head>
  <meta name="description" content="Blog und Unterrichtsmaterial zu Digitale Systeme und Computersysteme">
  <meta name="author" content="Günther Jena">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://www.semiversus.com/favicon.ico">
  <title>Semiversus | Allgemeines zur Atmel AVR Architektur</title>
  <link href="https://www.semiversus.com/theme/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://www.semiversus.com/theme/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://www.semiversus.com/theme/css/semiversus.css" rel="stylesheet">
  <link href="https://www.semiversus.com/theme/css/pygments.css" rel="stylesheet">
  <script src="https://www.semiversus.com/theme/js/jquery.min.js"></script>
  <script src="https://www.semiversus.com/theme/js/bootstrap.min.js"></script>

    <script type= "text/javascript">
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = 'https:' == document.location.protocol ? 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' : 'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; 
        s[(window.opera ? "innerHTML" : "text")] =
            "MathJax.Hub.Config({" + 
            "    config: ['MMLorHTML.js']," + 
            "    jax: ['input/TeX','input/MathML','output/HTML-CSS','output/NativeMML']," +
            "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," + 
            "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
            "    tex2jax: { " +
            "        inlineMath: [ ['%%','%%'] ], " +
            "        processEscapes: false }, " +
            "    'HTML-CSS': { " +
            "        styles: { '.MathJax .mo, .MathJax .mi': {color: 'black ! important'}} " +
            "    } " +
            "}); ";
        (document.body || document.getElementsByTagName('head')[0]).appendChild(s);
    </script>
</head>
<body data-spy="scroll" data-target="#sidebar" data-offset=30>
  <div id="wrap">
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
          </button>
          <a href="https://www.semiversus.com/index.html" class="navbar-brand">SEMIVERSUS</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://www.semiversus.com/index.html">Blog</a></li>
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Unterricht<b class="carret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.semiversus.com/dic/uebersicht.html"><em>Übersicht</em></a></li>
                <li><a href="https://www.semiversus.com/dic/grundlagen_der_digitaltechnik/uebersicht.html">Grundlagen der Digitaltechnik</a></li>
                <li><a href="https://www.semiversus.com/dic/programmierbare_logik/uebersicht.html">Programmierbare Logik</a></li>
                <li><a href="https://www.semiversus.com/dic/mikrocontroller/uebersicht.html">Mikrocontroller</a></li>
                <li><a href="https://www.semiversus.com/dic/hardwarenahe_programmierung/uebersicht.html">Hardwarenahe Programmierung</a></li>
                <li><a href="https://www.semiversus.com/dic/halbleiterelemente/uebersicht.html">Halbleiterelemente</a></li>
                <li><a href="https://www.semiversus.com/dic/bussysteme/uebersicht.html">Bussysteme</a></li>
                <li><a href="https://www.semiversus.com/dic/rechnerarchitektur/uebersicht.html">Rechnerarchitektur</a></li>
                <li><a href="https://www.semiversus.com/dic/digitale_signalverarbeitung/uebersicht.html">Digitale Signalverarbeitung</a></li>
                <li><a href="https://www.semiversus.com/dic/komplexe_digitale_systeme/uebersicht.html">Komplexe digitale Systeme</a></li>
              </ul>
            <li><a href="https://www.semiversus.com/projekte/projekte.html">Projekte</a></li>
            <li><a href="https://www.semiversus.com/about.html">Über mich</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/semiversus" class="social" data-toggle="tooltip" data-placement="bottom" title="Github.com/Semiversus"><span class="fa fa-github fa-2x"></span></a></li>
            <li><a href="http://stackoverflow.com/users/166605" class="social" data-toggle="tooltip" data-placement="bottom" title="Stackoverflow.com/Semiversus"><span class="fa fa-stack-overflow fa-2x"></span></a></li>
            <li><a href="https://www.semiversus.com/semiversus.atom.xml" class="social" data-toggle="tooltip" data-placement="bottom" title="RSS Feed"><span class="fa fa-rss fa-2x"></span></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
    <div class="visible-print-block">Semiversus | Allgemeines zur Atmel AVR Architektur</div>
<ol class="breadcrumb hidden-print"><li><a href="https://www.semiversus.com/dic/uebersicht.html">Digitale Systeme und Computersysteme</a></li><li><a href="https://www.semiversus.com/dic/hardwarenahe_programmierung/uebersicht.html">Hardwarenahe Programmierung</a></li><li><strong>Allgemeines zur Atmel AVR Architektur</strong></li></ol>      <div class="row">
        <div class="col-md-8" role="main">
  <header><h1>Allgemeines zur Atmel AVR Architektur<div class="pull-right hidden-print"><a href="https://www.semiversus.com/dic/hardwarenahe_programmierung/avr_allgemein.md"  class="btn btn-default btn-xs" data-toggle="tooltip" data-placement="bottom" title="Quelltext zu dieser Seite"><span class="fa fa-file-text-o fa-lg"></span></a></div></h1></header>
  <h1 id="allgemeines">Allgemeines</h1>
<p>Datenblatt Atmel ATMega16 (<a href="http://www.atmel.com/Images/doc2466.pdf">Download &uuml;ber Atmel.com</a>){: class="external" }</p>
<p>S&auml;mtliche Seitenangaben beziehen sich auf dieses Datenblatt (Rev. 2466T&ndash;AVR&ndash;07/10).</p>
<h1 id="fuse-und-lock-bits-seite-259-261">Fuse und Lock Bits (<em>Seite 259-261</em>)</h1>
<p>Bei den Fuse Bits handelt es sich um Bits, die w&auml;hrend einem Programmiervorgang ver&auml;ndert werden k&ouml;nnen. Mit den Fuse Bits wird z.B. die Wahl der Taktquelle (intern oder extern, ...) ausgew&auml;hlt. Der Name <em>Fuse Bit</em> kann hier etwas verwirren, da sie nicht wie Sicherungen wirken, die nur einmal programmiert werden k&ouml;nnen.</p>
<p>Bei den <em>Lock Bits</em> handelt es sich um einen Auslese Schutz. Wird ein Mikrocontroller in einem Produkt verwendet, kann es sinnvoll sein, den Programmspeicher-Inhalt vor einem Auslesen zu sch&uuml;tzen. Es gibt drei verschiedene Modi dieses Schutzes:</p>
<ul>
<li>Programmieren und Auslesen des Programmspeichers erlaubt</li>
<li>Programmieren erlaubt, aber nicht das Auslesen</li>
<li>Weder Programmieren noch Auslesen erlaubt.</li>
</ul>
<p>Diese Lockbits k&ouml;nnen nur einmal gesetzt werden und dann nicht wieder zur&uuml;ckgesetzt werden.</p>
<h1 id="versorgung">Versorgung</h1>
<p>Die Versorgungspannung ist abh&auml;ngig vom verwendeten Typ. Beim ATMega16 gibt es zwei verschiedene Ausf&uuml;hrungen (siehe Seite 336):</p>
<table>
<thead>
<tr>
<th>Takt</th>
<th>Versorgung</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>ATMega16</td>
<td>bis 16Mhz</td>
<td>4.5V bis 5.5V</td>
</tr>
<tr>
<td>ATMega16L</td>
<td>bis 8Mhz</td>
<td>2.7V bis 5.5V</td>
</tr>
</tbody>
</table>
<p>Die Stromaufnahme ist abh&auml;ngig von der Betriebsspannung, der Betriebsart und der Taktfrequenz (siehe Seite 299-311). Generell kann gesagt werden, dass je kleiner die Betriebsspannung und die Taktfrequenz ist, desto kleiner ist der Stromverbrauch. Die verschiedenen Betriebsmodie helfen, den Stromverbrauch zu reduzieren, indem der Microcontroller seinen Betrieb einstellt und in verschiedene Stromsparmodis wechselt.</p>
<p>Bei der Versorgung wird zwischen der digitalen Versorgung f&uuml;r den eigentlichen Mikroprozessorkern und der analogen Versorgung f&uuml;r den ADC unterschieden.</p>
<h1 id="reset-seite-37-41">Reset (<em>Seite 37-41</em>)</h1>
<p>W&auml;hrend dem Reset werden alle Register auf ihren Anfangszustand zur&uuml;ckgesetzt. Die Programmausf&uuml;hrung startet beim Reset Vektor.</p>
<p>Es gibt verschiedene M&ouml;glichkeiten, einen Reset durchzuf&uuml;hren:</p>
<ul>
<li><strong>Power-On Reset</strong>: Ein Reset wird durchgef&uuml;hrt, wenn sich die Betriebsspannung unter der Power-on-Reset Spannungsgrenze befindet.</li>
<li><strong>External Reset</strong>: Wenn am RESET Pin ein Low-Pegel anliegt, wird ein Reset durchgef&uuml;hrt.</li>
<li><strong>Watchdog Reset</strong>: Beim Watchdog des Atmel AVR handelt es sich um einen sogenannten Time-Out Watchdog. Zur Verwendung wird der Watchdog aktiviert. Die Applikation muss in regelm&auml;&szlig;igen Zeitintervallen den Watchdog zur&uuml;cksetzen. Wenn dieses Zeitintervall zu gro&szlig; ist (z.B. weil die Applikation sich in einer Endlosschleife gefangen hat) wird der Watchdog aktiv und l&ouml;st einen Reset aus.</li>
<li><strong>Brown-Out Reset</strong>: Die Brown-Out Detektion erkennt einen Abfall der Versorgungsspannung. Beim Atmel AVR k&ouml;nnen &uuml;ber Fuse Bits verschiedene Pegel eingestellt werden (beim ATMega16 2.7V und 4V). Ein Reset wird ausgel&ouml;st, wenn die Versorgungsspannung diesen Pegel unterschreitet und die Brown-Out Detektion generell aktiviert ist.</li>
<li><strong>JTAG AVR Reset</strong>: Die JTAG Schnittstelle dient dem direkten Zugriff auf die Register des Mikrocontrollers z.B. f&uuml;r Debugging Zwecke. &Uuml;ber diese Schnittstelle kann auch ein Reset ausgel&ouml;st werden.</li>
</ul>
<h1 id="takt-seite-24-31">Takt (<em>Seite 24-31</em>)</h1>
<p>F&uuml;r den ATMega16 Mikrocontroller gibt es verschiedene Taktquellen auf der einen und Komponenten, die einen Takt ben&ouml;tigen, auf der anderen Seite.</p>
<p>Komponenten die mit einem Takt versorgt werden sind dabei:</p>
<ul>
<li>%%clk_{CPU}%%: Dieser Takt steuert die Abl&auml;ufe innerhalb des Prozessorkerns und dem SRAM Speicher.</li>
<li>%%clk_{I/O}%%: Die meisten Peripheriebausteine innerhalb des ATMega16 werden mittels diesem Takt gesteuert. Dazu z&auml;hlen etwa die USART und der Timer/Counter.</li>
<li>%%clk_{ADC}%%: Der ADC hat eine eigene Taktversorgung. Dies erlaubt das Anhalten des Prozessor und I/O Taktes, um eine m&ouml;glichst st&ouml;rungsfreie Analogumsetzung zu erm&ouml;glichen.</li>
<li>%%clk_{ASY}%%: Dieser Takt kann von einem externen 32kHz Quarzoszillator erzeugt werden. Dadurch wird es m&ouml;glich, eine Echtzeitmessung auch innerhalb eines Stromspar Modus durchzuf&uuml;hren.</li>
</ul>
<p>Der Watchdog Timer wird von einem eigenen Oszillator betrieben. Die Frequenz ist abh&auml;ngig von Temperatur und Versorgungsspannung (Seite 321).</p>
<p>Als Taktquellen gibt es verschiedene M&ouml;glichkeiten, die per <em>Fuse Bits</em> ausgew&auml;hlt werden:</p>
<ul>
<li>Externer Quarz (hoch und niederfrequent)</li>
<li>Externer RC Oszillator</li>
<li>Interner RC Oszillator (Kalibrierung &uuml;ber das OSCCAL Register).</li>
<li>Externes Taktsignal</li>
</ul>
<p>Zus&auml;tzlich zu den Taktquellen sind noch Startzeiten f&uuml;r die einzelnen Taktquellen &uuml;ber die Fuse Bits einstellbar. Diese Startzeiten werden ben&ouml;tigt, da die einzelnen Taktquellen eine bestimmte Zeit ben&ouml;tigen, bis sie auf ihrer Frequenz schwingen. Erst wenn diese Startzeit (Anzahl an definierten Taktzyklen und zus&auml;tzliche Verz&ouml;gerung) vergangen ist, wird der Prozessorkern mit dem Takt versorgt. In der Praxis reicht es meist aus, einfach das Maximum an Startverz&ouml;gerung einzustellen, da die daraus resultierende Zeit immer unter 100 Millisekunden ist.</p>
<h1 id="sleep-modes-seite-32-36">Sleep Modes (<em>Seite 32-36</em>)</h1>
<p>Der Stromverbrauch jeder Komponente eines Mikrocontrollers besteht aus einem statischen Grundverbrauch (Leckstr&ouml;me, usw.) und einem dynamischen Verbrauch, der durch die Umschaltvorg&auml;nge, die vom Taktsignal ausgel&ouml;st werden, bestimmt wird. Der dynamische Verbrauch macht den gr&ouml;&szlig;ten Teil aus. Dadurch ist bei niedriger Taktfrequenz auch der Stromverbrauch niedriger. Wird f&uuml;r einen bestimmten Zeitraum der Prozessorkern nicht ben&ouml;tigt, kann dieser durch Abschalten des Prozessortaktes in einen sogenannten Schlafmodus gebracht werden und der Stromverbrauch reduziert sich.</p>
<p>Es stehen verschiedene Stromsparmode zur Verf&uuml;gung:</p>
<ul>
<li><strong>Idle</strong>: Prozessor h&auml;lt, bis ein Interrupt auftritt</li>
<li><strong>ADC Noise Reduction</strong>: Solange eine Analogwandlung l&auml;uft und kein Interrupt eintritt, wird der Takt des Prozessors und der IO Komponenten gestoppt. Dies verbessert die Messungen, indem St&ouml;rungen minimiert werden.</li>
<li><strong>Standby</strong>: Deaktiviert zus&auml;tzlich den ADC Takt, sowie Interrupts f&uuml;r EEPROM/Flash.</li>
<li><strong>Power Down</strong> bzw. <strong>Power Save</strong>: In diesem Zustand wird der externe Oszillator gestoppt. Dies erm&ouml;glicht eine weitere Stromreduzierung. Tritt ein Interrupt auf, kommt es zu einer Verz&ouml;gerung, da der Oszillator erst <em>anlaufen</em> muss. Dazu wird die durch die Fuse Bits eingestellte Verz&ouml;gerung verwendet.</li>
</ul>
        </div>
        <div class="col-md-4" role="complementary">
    <nav class="well well-sm" data-spy="affix" data-offset-top="0" id="sidebar">
    <ul class="nav"><li><a href="#allgemeines">Allgemeines</a></li><li><a href="#fuse-und-lock-bits-seite-259-261">Fuse und Lock Bits (Seite 259-261)</a></li><li><a href="#versorgung">Versorgung</a></li><li><a href="#reset-seite-37-41">Reset (Seite 37-41)</a></li><li><a href="#takt-seite-24-31">Takt (Seite 24-31)</a></li><li><a href="#sleep-modes-seite-32-36">Sleep Modes (Seite 32-36)</a></li></ul>
    </nav>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer hidden-print"><div class="container"><p class="text-muted credit"><a href="http://creativecommons.org/licenses/by-sa/3.0/de/">CC-BY-SA</a> | Günther Jena 2011 - 2016 | Letztes Update am 1.4.2016 (Rev. <a href="https://github.com/semiversus/semiversus.github.io-source/commit/94b9271">94b9271</a>)</p></div></footer>
</body>
</html>